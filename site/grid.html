<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sock Test</title>
	<style>
body {
  margin: 0px;
}

#objectContainer {
  height:500px; 
  overflow:visible; 
  padding:0; 
  position:relative;
}

.object {
	background-color: #91e600;
	text-align: center;
	width: 50px;
	height: 50px;
	line-height: 50px;
	position: absolute;
	top:0;
	left:0;
	
}
.square {

}
.circle {
	-webkit-border-radius: 25px;
	-moz-border-radius: 25px;
	border-radius: 25px;
}

#dynamicAdd {
	position: absolute;
	left: 50%;
	top: 50%;
}

	</style>
</head>
<body>

<div id="objectContainer">
		<div class="object square">A</div>
		<div class="object circle" style="left:100px; background-color:red;">B</div>
</div>
<button id="dynamicAdd">Add</button>





	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.5/TweenMax.min.js"></script>-->
	
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.6/TweenMax.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.6/plugins/CSSPlugin.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.6/utils/Draggable.min.js"></script>


	<script>


var $container = $("#objectContainer");
var gridWidth = 50;
var gridHeight = 50;
var windowWidth = $(window).width();
var gridRows = 10;
var gridColumns = 10;

for (i = 0; i < gridRows * gridColumns; i++) {
	y = Math.floor(i / gridColumns) * gridHeight;
	x = (i * gridWidth) % (gridColumns * gridWidth);
	$("<div/>").css({position:"absolute", border:"1px solid #454545", width:gridWidth-1, height:gridHeight-1, top:y, left:x}).prependTo($container);
}

TweenLite.set($container, {height: gridRows * gridHeight + 1, width: gridColumns * gridWidth + 1});

function dragBoxSetUp(){
	Draggable.create(".object", {
    type:"x,y",
    edgeResistance:0.65,
    bounds:"#objectContainer",
    throwProps:true,
    liveSnap:true,
    snap: {
      x: function(endValue) {
        return Math.round(endValue/gridWidth)*gridWidth;
      },
      y: function(endValue) {
        return Math.round(endValue/gridHeight)*gridHeight;
      }
    }
	});
}
dragBoxSetUp();

$(window).load(function() {
  $("html, body").animate({ scrollTop: $(document).height() }, 1000);
  // $("html, body").scrollTop($(document).height()); //not working correctly
});

		$(document).ready(function() {
			$("#dynamicAdd").click(function(){
				$container.append("<div class='object square' style='left:100px; top:100px; background-color:blue;'>C</div>");
				dragBoxSetUp();
			});
		});
	</script>
</body>
</html>